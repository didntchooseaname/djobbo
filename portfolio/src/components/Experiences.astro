---
import SectionTitle from "../components/SectionTitle.astro"
import { HiBriefcase, HiLink } from "react-icons/hi2"
import Card from "./Card.astro"
import Avatar from "./Avatar.astro"

type Experience = {
    company: string
    link?: { title: string; href: string }
    title: string
    logo: string
    tags: string[]
    date: string
    stack?: string[]
}

const experiences: Experience[] = [
    {
        company: "Klaxoon",
        link: { title: "klaxoon.com", href: "https://klaxoon.com" },
        title: "Frontend Engineer",
        logo: "Klaxoon.png",
        tags: ["Fulltime"],
        date: "Jan 2022 - Present",
        stack: ["React", "TypeScript", "Node.js", "Jest"],
    },
    {
        company: "Corehalla",
        link: { title: "corehalla.com", href: "https://corehalla.com" },
        title: "Fullstack Engineer - UI Designer",
        logo: "Corehalla.png",
        tags: ["Open Source", "Personal Project"],
        date: "2018 - Present",
        stack: [
            "React",
            "NextJS",
            "Tailwind",
            "Supabase",
            "Prisma",
            "Express",
            "Figma",
        ],
    },
    {
        company: "BuckoGraphics",
        link: { title: "bucko.graphics", href: "https://bucko.graphics" },
        title: "Logomark Designer",
        logo: "BuckoGraphics.png",
        tags: ["Personal Project"],
        date: "2020 - Present",
        stack: ["Figma", "Illustrator", "Photoshop"],
    },
    {
        company: "Ludopod",
        title: "Hobbyist Game Developer",
        logo: "Ludopod.png",
        tags: ["Personal Project"],
        date: "2016 - 2018",
        stack: ["Unity", "C#", "Cinema 4D", "Photoshop"],
    },
    {
        company: "Étoile Alençonnaise",
        title: "Men's Artistic Gymnastics Coach",
        logo: "EtoileAlencon.png",
        tags: ["Volontary Work"],
        date: "2012 - 2016",
    },
]
---

<SectionTitle
    title="Experience & Education"
    Icon={HiBriefcase}
    className="mt-12 mb-4"
/>
<Card paddingClassName="p-0" shadowOutline>
    {
        experiences.map(
            ({ company, title, logo, tags, date, stack, link }, i) => (
                <div
                    class:list={[
                        "flex items-center justify-between p-4",
                        {
                            "border-t border-outline": i !== 0,
                        },
                    ]}
                >
                    <div>
                        <div class="flex items-center gap-2">
                            <Avatar
                                src={`companies/${logo}`}
                                alt="company"
                                className="bg-bg"
                            />
                            <div>
                                <p class="before:content-['@'] before:text-text1 font-semibold text-lg flex items-center">
                                    {company}
                                    <span class="pl-2 inline-flex gap-2 text-xs font-normal text-text1">
                                        {tags.map((tag) => (
                                            <span class="border border-outline px-1 py-0.5 rounded-md">
                                                {tag}
                                            </span>
                                        ))}
                                    </span>
                                </p>
                                <p class="text-text1 text-sm">{title}</p>
                            </div>
                        </div>
                        {!!stack && (
                            <ul class="flex items-center mt-2">
                                {stack.map((tech, i) => (
                                    <>
                                        {i !== 0 && (
                                            <div class="bg-primary w-0.5 h-0.5 rotate-45" />
                                        )}
                                        <span class="flex items-center px-2 text-xs font-semibold text-text1 rounded-full">
                                            {tech}
                                        </span>
                                    </>
                                ))}
                            </ul>
                        )}
                    </div>
                    <div class="text-xs text-text1 text-end">
                        <span>{date}</span>
                        {link && (
                            <a
                                class="flex gap-1 items-center justify-end"
                                href={link.href}
                                target="_blank"
                            >
                                {link.title}
                                <HiLink className="w-3 h-3" />
                            </a>
                        )}
                    </div>
                </div>
            ),
        )
    }
</Card>
